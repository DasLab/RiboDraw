<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of centerOfMass</title>
  <meta name="keywords" content="centerOfMass">
  <meta name="description" content="CENTEROFMASS finds the center of mass of the N-dimensional input array">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">Scripts</a> &gt; <a href="#">external</a> &gt; <a href="index.html">centerOfMass</a> &gt; centerOfMass.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for Scripts/external/centerOfMass&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>centerOfMass
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>CENTEROFMASS finds the center of mass of the N-dimensional input array</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function varargout = centerOfMass(A,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> CENTEROFMASS finds the center of mass of the N-dimensional input array

   CENTEROFMASS(A) finds the gray-level-weighted center of mass of the
   N-dimensional numerical array A. A must be real and finite. A warning
   is issued if A contains any negative values. Any NaN elements of A will
   automatically be ignored. CENTEROFMASS produces center of mass
   coordinates in units of pixels. An empty array is returned if the
   center of mass is undefined.

   The center of mass is reported under the assumption that the first
   pixel in each array dimension is centered at 1.

   Also note that numerical arrays other than DOUBLE and SINGLE are
   converted to SINGLE in order to prevent numerical roundoff error.

   Examples:
       A = rgb2gray(imread('saturn.png'));
       C = centerOfMass(A);

       figure; imagesc(A); colormap gray; axis image
       hold on; plot(C(2),C(1),'rx')

   See also:</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = centerOfMass(A,varargin)</a>
0002 <span class="comment">% CENTEROFMASS finds the center of mass of the N-dimensional input array</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   CENTEROFMASS(A) finds the gray-level-weighted center of mass of the</span>
0005 <span class="comment">%   N-dimensional numerical array A. A must be real and finite. A warning</span>
0006 <span class="comment">%   is issued if A contains any negative values. Any NaN elements of A will</span>
0007 <span class="comment">%   automatically be ignored. CENTEROFMASS produces center of mass</span>
0008 <span class="comment">%   coordinates in units of pixels. An empty array is returned if the</span>
0009 <span class="comment">%   center of mass is undefined.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">%   The center of mass is reported under the assumption that the first</span>
0012 <span class="comment">%   pixel in each array dimension is centered at 1.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">%   Also note that numerical arrays other than DOUBLE and SINGLE are</span>
0015 <span class="comment">%   converted to SINGLE in order to prevent numerical roundoff error.</span>
0016 <span class="comment">%</span>
0017 <span class="comment">%   Examples:</span>
0018 <span class="comment">%       A = rgb2gray(imread('saturn.png'));</span>
0019 <span class="comment">%       C = centerOfMass(A);</span>
0020 <span class="comment">%</span>
0021 <span class="comment">%       figure; imagesc(A); colormap gray; axis image</span>
0022 <span class="comment">%       hold on; plot(C(2),C(1),'rx')</span>
0023 <span class="comment">%</span>
0024 <span class="comment">%   See also:</span>
0025 <span class="comment">%</span>
0026 <span class="comment">%</span>
0027 
0028 <span class="comment">%</span>
0029 <span class="comment">%   Jered R Wells</span>
0030 <span class="comment">%   2013/05/07</span>
0031 <span class="comment">%   jered [dot] wells [at] gmail [dot] com</span>
0032 <span class="comment">%</span>
0033 <span class="comment">%   v1.0</span>
0034 <span class="comment">%</span>
0035 <span class="comment">%   UPDATES</span>
0036 <span class="comment">%       YYYY/MM/DD - jrw - v1.1</span>
0037 <span class="comment">%</span>
0038 <span class="comment">%</span>
0039 
0040 <span class="comment">%% INPUT CHECK</span>
0041 narginchk(0,1);
0042 nargoutchk(0,1);
0043 fname = <span class="string">'centerOfMass'</span>;
0044 
0045 <span class="comment">% Checked required inputs</span>
0046 validateattributes(A,{<span class="string">'numeric'</span>},{<span class="string">'real'</span>,<span class="string">'finite'</span>},fname,<span class="string">'A'</span>,1);
0047 
0048 <span class="comment">%% INITIALIZE VARIABLES</span>
0049 A(isnan(A)) = 0;
0050 <span class="keyword">if</span> ~(strcmpi(class(A),<span class="string">'double'</span>) || strcmpi(class(A),<span class="string">'single'</span>))
0051     A = single(A);
0052 <span class="keyword">end</span>
0053 <span class="keyword">if</span> any(A(:)&lt;0)
0054     warning(<span class="string">'MATLAB:centerOfMass:neg'</span>,<span class="string">'Array A contains negative values.'</span>);
0055 <span class="keyword">end</span>
0056 
0057 <span class="comment">%% PROCESS</span>
0058 sz = size(A);
0059 nd = ndims(A);
0060 M = sum(A(:));
0061 C = zeros(1,nd);
0062 <span class="keyword">if</span> M==0
0063     C = [];
0064 <span class="keyword">else</span>
0065     <span class="keyword">for</span> ii = 1:nd
0066         shp = ones(1,nd);
0067         shp(ii) = sz(ii);
0068         rep = sz;
0069         rep(ii) = 1;
0070         ind = repmat(reshape(1:sz(ii),shp),rep);
0071         C(ii) = sum(ind(:).*A(:))./M;
0072     <span class="keyword">end</span>
0073 <span class="keyword">end</span>
0074 
0075 <span class="comment">% Assemble the VARARGOUT cell array</span>
0076 varargout = {C};
0077 
0078 <span class="keyword">end</span> <span class="comment">% MAIN</span></pre></div>
<hr><address>Generated on Fri 17-Nov-2017 17:25:01 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>