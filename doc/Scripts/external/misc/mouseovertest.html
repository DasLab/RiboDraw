<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of mouseovertest</title>
  <meta name="keywords" content="mouseovertest">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">Scripts</a> &gt; <a href="#">external</a> &gt; <a href="index.html">misc</a> &gt; mouseovertest.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for Scripts/external/misc&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>mouseovertest
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function mouseovertest </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function mousemove(src,ev,L,animals)</a></li><li><a href="#_sub2" class="code">function index=findclosestpoint2D(xclick,yclick,datasource)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function mouseovertest</a>
0002  
0003 f=figure(<span class="string">'renderer'</span>,<span class="string">'painters'</span>);
0004 a=axes;
0005  
0006 <span class="comment">%some animal data:</span>
0007 <span class="comment">%name   speed   weight</span>
0008 animals={<span class="string">'Peregrine falcon'</span>,200.00,4;
0009 <span class="string">'Cheetah'</span>,70.00,110;
0010 <span class="string">'Pronghorn antelope'</span>,61.00,60;
0011 <span class="string">'Lion'</span>,50.00,150;
0012 <span class="string">'Thomson''s gazelle'</span>,50.00,170;
0013 <span class="string">'Wildebeest'</span>,50.00,250;
0014 <span class="string">'Quarter horse'</span>,47.50,1000;
0015 <span class="string">'Cape hunting dog'</span>,45.00,40;
0016 <span class="string">'Elk'</span>,45.00,300;
0017 <span class="string">'Coyote'</span>,43.00,50;
0018 <span class="string">'Gray fox'</span>,42.00,15;
0019 <span class="string">'Hyena'</span>,40.00,45;
0020 <span class="string">'Ostrich'</span>,40.00,200};
0021  
0022 <span class="comment">%plot the data</span>
0023 L=line(cell2mat(animals(:,3)),cell2mat(animals(:,2)),<span class="string">'marker'</span>,<span class="string">'o'</span>,<span class="string">'markersize'</span>,10,<span class="keyword">...</span>
0024     <span class="string">'markerfacecolor'</span>,[.3 .6 1],<span class="string">'markeredgecolor'</span>,[0 0 0],<span class="string">'linestyle'</span>,<span class="string">'none'</span>);
0025 xlabel(<span class="string">'Weight (lbs'</span>)
0026 ylabel(<span class="string">'Speed (mph)'</span>);
0027  
0028 <span class="comment">%apply mouse motion function</span>
0029 set(f,<span class="string">'windowbuttonmotionfcn'</span>,{@<a href="#_sub1" class="code" title="subfunction mousemove(src,ev,L,animals)">mousemove</a>,L,animals});
0030  
0031 <a name="_sub1" href="#_subfunctions" class="code">function mousemove(src,ev,L,animals)</a>
0032  
0033 <span class="comment">%since this is a figure callback, the first input is the figure handle:</span>
0034 f=src;
0035  
0036 <span class="comment">%like all callbacks, the second input, ev, isn't used.</span>
0037  
0038 <span class="comment">%determine which object is below the cursor:</span>
0039 obj=hittest(f); <span class="comment">%&lt;-- the important line in this demo</span>
0040  
0041 <span class="keyword">if</span> obj==L <span class="comment">%if over the plot...</span>
0042     <span class="comment">%get cursor coordinates in its axes:</span>
0043     a=get(L,<span class="string">'parent'</span>);
0044     point=get(a,<span class="string">'currentpoint'</span>);
0045     xclick=point(1,1,1);
0046     yclick=point(1,2,1);
0047  
0048     <span class="comment">%determine which point we're over:</span>
0049     idx=<a href="#_sub2" class="code" title="subfunction index=findclosestpoint2D(xclick,yclick,datasource)">findclosestpoint2D</a>(xclick,yclick,L);
0050  
0051     <span class="comment">%make a &quot;tool tip&quot; that displays this animal.</span>
0052     xoffset=5;
0053     yoffset=2;
0054  
0055     delete(findobj(f,<span class="string">'tag'</span>,<span class="string">'mytooltip'</span>)); <span class="comment">%delete last tool tip</span>
0056     text(animals{idx,3}+xoffset,animals{idx,2}+yoffset,animals{idx,1},<span class="keyword">...</span>
0057         <span class="string">'backgroundcolor'</span>,[1 1 .8],<span class="string">'tag'</span>,<span class="string">'mytooltip'</span>,<span class="string">'edgecolor'</span>,[0 0 0],<span class="keyword">...</span>
0058         <span class="string">'hittest'</span>,<span class="string">'off'</span>);
0059 <span class="keyword">else</span>
0060     delete(findobj(f,<span class="string">'tag'</span>,<span class="string">'mytooltip'</span>)); <span class="comment">%delete last tool tip</span>
0061  
0062 <span class="keyword">end</span>
0063  
0064  
0065 <a name="_sub2" href="#_subfunctions" class="code">function index=findclosestpoint2D(xclick,yclick,datasource)</a>
0066 <span class="comment">%this function checks which point in the plotted line &quot;datasource&quot;</span>
0067 <span class="comment">%is closest to the point specified by xclick/yclick. It's kind of</span>
0068 <span class="comment">%complicated, but this isn't really what this demo is about...</span>
0069  
0070 xdata=get(datasource,<span class="string">'xdata'</span>);
0071 ydata=get(datasource,<span class="string">'ydata'</span>);
0072  
0073 activegraph=get(datasource,<span class="string">'parent'</span>);
0074  
0075 pos=getpixelposition(activegraph);
0076 xlim=get(activegraph,<span class="string">'xlim'</span>);
0077 ylim=get(activegraph,<span class="string">'ylim'</span>);
0078  
0079 <span class="comment">%make conversion factors, units to pixels:</span>
0080 xconvert=(xlim(2)-xlim(1))/pos(3);
0081 yconvert=(ylim(2)-ylim(1))/pos(4);
0082  
0083 Xclick=(xclick-xlim(1))/xconvert;
0084 Yclick=(yclick-ylim(1))/yconvert;
0085  
0086 Xdata=(xdata-xlim(1))/xconvert;
0087 Ydata=(ydata-ylim(1))/yconvert;
0088  
0089 Xdiff=Xdata-Xclick;
0090 Ydiff=Ydata-Yclick;
0091  
0092 distnce=sqrt(Xdiff.^2+Ydiff.^2);
0093  
0094 index=distnce==min(distnce);
0095  
0096 index=index(:); <span class="comment">%make sure it's a column.</span>
0097  
0098 <span class="keyword">if</span> sum(index)&gt;1
0099     thispoint=find(distnce==min(distnce),1);
0100     index=false(size(distnce));
0101     index(thispoint)=true;
0102 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 17-Nov-2017 17:25:01 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>